---
theme: geist
colorSchema: light

layout: center

drawings:
  persist: false

# slide transition: https://sli.dev/guide/animations.html#slide-transitions
transition: slide-left

# enable MDC Syntax: https://sli.dev/features/mdc
mdc: true
---

# Flutterå…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã™ã‚‹ã¾ã§
2025 10æœˆ åˆå®¿LT - 2025/10/16 MSèŠæµ¦ãƒ“ãƒ«

ã‚¸ãƒ§ãƒ–ãƒã‚¦ã‚¹é–‹ç™º åœŸæ–¹

---
layout: center
---

# ä»Šæ—¥ã¯ã­

---
layout: center
---

# OSSã¯ã„ã„ãã¨ã„ã†è©±ã‚’ã—ã¾ã™


---
layout: center
---

# ã‚ã‚‹æ—¥ã®ã“ã¨ 

---
layout: center
---

## ã„ã¤ã‚‚ã®ã‚ˆã†ã«ãƒªãƒªãƒ¼ã‚¹å‰ã®QAä¾é ¼ã‚’çµ‚ãˆã¦ã€<br>å¯©æŸ»æº–å‚™ã‚’ã—ã‚ˆã†ã‹ã¨æ€ã£ã¦ã„ãŸã¨ã“ã‚ã€ã€â˜•ï¸

---
layout: center
---

<div>
  <h2>QAã‹ã‚‰ãƒã‚°å ±å‘ŠãŒï¼ï¼</h2>
</div>
<p v-click>ã„ã¤ã‚‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€ã€ã€</p>


---
layout: center
---

# ã‚¢ãƒ—ãƒªã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã«ãƒã‚°ãŒã‚ã‚‹ã‚ˆï¼ï¼

---
layout: default
---

# å‚è€ƒï¼‰ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã¨ã¯
<h2 class='text-xl'>
  iOS: Universal Link / Android: App Links
</h2>
<p>
  ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯â†’å¯¾å¿œã™ã‚‹ã‚¢ãƒ—ãƒªã®Viewã«é·ç§»ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹
</p>
<p>
  ã‚¢ãƒ—ãƒªã®å®Ÿè£…ã§ã€é·ç§»ã™ã‚‹ãƒªãƒ³ã‚¯ã«å¿œã˜ã¦<strong>å‡¦ç†ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã‚Šã™ã‚‹ã“ã¨</strong>ã‚‚å¯èƒ½
</p>

---
layout: default
---

<div class='flex flex-row gap-6'>
  <div class='flex-1 flex flex-col justify-center text-left'>
    <h2 v-click>ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã‹ã‚‰ã®é·ç§»æ™‚ã«<br/>æ¤œç´¢æ¡ä»¶ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‰ãªã„ï¼ï¼</h2>
    <ul class='m-0 p-0' v-click>
      <li>â€»é ˜åŸŸã”ã¨ã«ãƒ¢ãƒ¼ãƒ‰ã‚’ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã§åˆ‡ã‚Šæ›¿ãˆã‚‹æ©Ÿèƒ½</li>
    </ul>
    <ul v-click>
      <li>âœ… jobhouse.jp/factory -> <strong>å·¥å ´</strong>ã®ãƒ¢ãƒ¼ãƒ‰(æ·»ä»˜ç”»åƒ) </li>
      <li>âŒ jobhouse.jp -> <strong>å…¨é ˜åŸŸ</strong>ã®ãƒ¢ãƒ¼ãƒ‰</li> 
    </ul>
  </div>
  <div class='flex-1 flex justify-center mt-4' v-click>
    <img src='/public/app_search.png' class='w-1/2'/>
  </div>
</div>

---
layout: center
---

## ã—ã‹ã‚‚ã€Androidã§ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆâ€»ã§ã®ã¿å†ç¾
<p>â€»ã‚¢ãƒ—ãƒªã‚’ã‚­ãƒ«ã—ãŸçŠ¶æ…‹</p>
<p class="text-2xl font-bold" v-click>ã©ã†ã„ã†ã‚ã‘ã‹iOSã¯å¤§ä¸ˆå¤«</p>

---
layout: center
---

# ã¯ã¦ã€ã€ã€ğŸ¤”

---
layout: center
---

# èª¿æŸ»é–‹å§‹ğŸ¤©


---
layout: center
---

# ã¾ãšã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…ã‚’ç–‘ã†


---
layout: default
---

# æ€ªã—ã„å ´æ‰€ã‚’æ¢ç´¢
<h3 v-click> 1.Androidã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«(xmlå®šç¾©) </h3>
<h3 v-click> 2.ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®Routingå®šç¾©ï¼ˆroutes.rbã¿ãŸã„ãªã‚‚ã®ï¼‰</h3>

---
layout: center
---

# åœ°é“ã«èª¿æŸ»...
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚“ã ã‚Šã€ãƒ­ã‚°ã‚’åŸ‹ã‚è¾¼ã‚“ã ã‚Š

---
layout: default
---
<div class="mt-8">

```dart{all|14-17}{maxHeight: '450px', class:'!children:text-xs mt-8'}
// ã‚¸ãƒ§ãƒ–ãƒã‚¦ã‚¹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰
// 1ã¤1ã¤ã®ã‚¯ãƒ©ã‚¹ãŒRoutingã®å®šç¾©ã«ã‚ãŸã‚‹
class HorizontalRootRoute extends GoRouteData with HorizontalNamespaceMixin {
  static const name = 'horizontal';
  static const _path = '/';

  const HorizontalRootRoute();
  @override
  Widget build(BuildContext context, GoRouterState state) {
    return const ArticlesRootPage();
  }

  @override
  FutureOr<String?> redirect(BuildContext context, GoRouterState state) async {
    // ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã‹ã‚‰èµ·å‹•ã—ãŸéš›ã¯ã€namespaceã®ãƒ¢ãƒ¼ãƒ‰ã‚’åŒæœŸã™ã‚‹
    if (state.uri.host.isNotEmpty) {
      await sync(context);
    }
    return null;
  }
}
```

</div>

<p class="text-lg font-bold" v-click>ã‚ã‹ã£ãŸï¼ï¼androidã®æ™‚ã ã‘ã€æ¤œç´¢æ¡ä»¶æ›´æ–°ã®ãŸã‚ã®syncãŒå‘¼ã°ã‚Œã¦ã„ãªã„</p>

---
layout: center
---

# ã§ã‚‚ãªã‚“ã§ã ã€ã€ã€

<p class="text-lg font-bold">æ¡ä»¶åˆ†å²çš„ã«ã¯â†“ã‚’è¦‹ã¦ã„ã‚‹ã®ã§ã€<strong>Hostã®æƒ…å ±ãŒæŠœã‘è½ã¡ã¦ã„ãã†ã€ã€ï¼Ÿ</strong></p>

```dart{1}
if (state.uri.host.isNotEmpty) {
      await sync(context);
}
```

---
layout: center
---

## å¿µã®ç‚ºæœ¬å½“ã«HostãŒæŠœã‘è½ã¡ã¦ã„ã‚‹ã®ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ğŸ”

---
layout: default
---
## ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯èµ·å‹•æ™‚ã®URLæƒ…å ±ã‚’ãƒ­ã‚°å‡ºåŠ›


```dart{all|15}
@Riverpod(keepAlive: true, dependencies: [routeObserver, RemoteConfig])
GoRouter router(Ref ref) {
  return GoRouter(
    routes: $appRoutes,
    navigatorKey: _rootNavigatorKey,
    debugLogDiagnostics: kDebugMode,
    observers: [
      ref.read(routeObserverProvider),
    ],
    onException: (context, state, router) async {
      //...
    },
    initialLocation: _initialLocation,
    redirect: (context, state) async {
      debugPrint('redirect: ${state.uri.toString()}');
      //...
    },
  );
```

---
layout: default
---
## ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯èµ·å‹•æ™‚ã®URLæƒ…å ±ã‚’ãƒ­ã‚°å‡ºåŠ›

CLIã‹ã‚‰Emulatorã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã‚’ç›´æ¥èµ·å‹•ã§ãã‚‹ã®ã§ãã‚Œã‚’åˆ©ç”¨

`/`ã®å ´åˆ
```shell{all|1|4}{maxHeight: '450px', class:'!children:text-xs mt-8'}
â¯ adb shell 'am start -W -a android.intent.action.VIEW -d "https://jobhouse.jobhouse-stg.th-svc.net/"'
LaunchState: COLD

08-18 16:14:30.581  2239  2239 I flutter : redirect: https://jobhouse.jobhouse-stg.th-svc.net/
```


`/`ç„¡ã—ã®å ´åˆ
```shell{all|1|4}{maxHeight: '450px', class:'!children:text-xs mt-8'}
â¯ adb shell 'am start -W -a android.intent.action.VIEW -d "https://jobhouse.jobhouse-stg.th-svc.net"'
LaunchState: COLD

08-18 16:14:10.282  1941  1941 I flutter : redirect: /? â†ã“ã“ã ã‘ã€redirect: /?ã«ãªã£ã¦ã„ã‚‹ãï¼ï¼
```


<p class="text-2xl font-bold text-center" v-click> `/`ç„¡ã—ã®ã¨ãã ã‘ã€hostã®æƒ…å ±ãŒæ¶ˆãˆã¦ã„ã‚‹ã ã¨... </p>

---
layout: center
---

## ã§ã¯ã©ã“ã§æŠœã‘è½ã¡ã¦ã„ã‚‹ã®ã‹ã€ã€ã€<br>åˆ†ã‹ã‚‰ãªã„ã‹ã‚‰è¦³ç‚¹ã‚’å¤‰ãˆã¦ã¿ã‚‹


---
layout: center
---

## ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã®æƒ…å ±(host/scheme...)ãŒ<br>ã©ã“ã¾ã§æ¥ã¦ã„ã‚‹ã®ã‹ã‚’èª¿ã¹ã‚‹

---
layout: center
---
<div class='flex flex-row gap-6 mx-8'>
  <div class='flex-1 flex flex-col justify-center text-left'>
    <p class="text-2xl font-bold">
      (ä½™è«‡) Flutterã‚¢ãƒ—ãƒªã¯OSã”ã¨ã®ãƒ›ã‚¹ãƒˆã‚¢ãƒ—ãƒªâ€»ã®ãªã‹ã§ã€ç‹¬è‡ªã®Flutterã‚¨ãƒ³ã‚¸ãƒ³ã‚’æŒã¤å½¢ã§å‹•ã„ã¦ã„ã‚‹
    </p>
    <span class="text-sm">â€»Kotlin/Swiftã®ãƒ›ã‚¹ãƒˆã‚¢ãƒ—ãƒªã ã¨æ€ã£ã¦ã‚‚ã‚‰ãˆã‚Œã°ã‚ã‹ã‚Šã‚„ã™ã„</span>
    <p v-click class="font-bold text-xl">Dartã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã“ã®Flutterã‚¨ãƒ³ã‚¸ãƒ³ã®ä¸Šã§å‹•ã</p>
  </div>
  <div class='flex-1 flex justify-center mt-4'>
    <img src='/app-anatomy.svg' class='w-1/2'/>
  </div>
</div>


---
layout: center
---

## ãƒ›ã‚¹ãƒˆã‚¢ãƒ—ãƒªï¼ˆKotlinï¼‰ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¾ã§ã¯ãã¦ã„ã‚‹ã‚ˆã­ï¼Ÿ

---
layout: default
---

<div class="mt-8">

```kotlin{all|6-9,18-21}{maxHeight: '500px', class:'!children:text-xs mt-8'}
// ...
class MainActivity : FlutterActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        intent?.data?.let { uri ->
            Log.i(
                "DL",
                "onCreate dataString=${intent?.dataString} scheme=${uri.scheme} host=${uri.host} path=${uri.path} query=${uri.query}"
            )
        } ?: run {
            Log.i("DL", "onCreate dataString=null")
        }
    }

    override fun onNewIntent(intent: Intent) {
        super.onNewIntent(intent)
        val uri = intent.data
        Log.i(
            "DL",
            "onNewIntent dataString=${intent.dataString} scheme=${uri?.scheme} host=${uri?.host} path=${uri?.path} query=${uri?.query}"
        )
    }
}
```
</div>
<p class="text-2xl font-bold text-center">ãƒ­ã‚°ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã€ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆâ†’ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã‚’èµ·å‹•ã—ã¦ã¿ã‚‹</p>

---
layout: default
---

<div class="flex flex-row items-center justify-center mt-16">

```shell{all|10-13}{maxHeight: '500px', class:'!children:text-xs'}
â¯ adb shell 'am start -W -a android.intent.action.VIEW -d "https://jobhouse.jobhouse-stg.th-svc.net/"'
Starting: Intent { act=android.intent.action.VIEW dat=https://jobhouse.jobhouse-stg.th-svc.net/... }
Status: ok
LaunchState: WARM
Activity: com.techouse.driverApp.stg/com.techouse.driver_app.MainActivity
TotalTime: 2153
WaitTime: 2157
Complete

08-18 16:07:29.577 32421 32421 I DL      
: onCreate dataString=https://jobhouse.jobhouse-stg.th-svc.net/ \
scheme=https host=jobhouse.jobhouse-stg.th-svc.net path=/ query=null
```

</div>

<p class="text-2xl font-bold text-center" v-click>host/schemeã®æƒ…å ±ã¯ã¡ã‚ƒã‚“ã¨æ¥ã¦ã„ãã†ã§ã™ã­</p>

---
layout: center
---

## å¤§ä¸ˆå¤«ãã†
<p class="text-2xl font-bold text-center" v-click>ã¦ã“ã¨ã¯ã€ãã‚Œã‚ˆã‚Šä¸Šã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã©ã“ã‹ã—ã‚‰ã§æŠœã‘è½ã¡ã¦ã„ã‚‹ã®ã‹ã‚‚ï¼Ÿ</p>


---
layout: center
---

## ã²ã¨ã¾ãšãƒ©ã‚¤ãƒ–ãƒ©ãƒª/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚‹

æ€§è³ªçš„ã«Flutter Engineã®å•é¡Œã§ã¯ãªã„ã ã‚ã†...ã¨ä¿¡ã˜ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç–‘ã†

é—‡é›²ã«æ¢ã™ã¨ã‚­ãƒªãŒãªã„ã‚“ã§ã­ã€ã€ã€ï¼ˆè¨€ã„è¨³ï¼‰

---
layout: center
---

<p class="text-3xl text-black"> ã‚¸ãƒ§ãƒ–ãƒã‚¦ã‚¹ã‚¢ãƒ—ãƒªã¯Routingã«<strong>GoRouter</strong>ã‚’åˆ©ç”¨ã—ã¦ãŠã‚Šã€<br>ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚‚ã‚ã‚‹ç¨‹åº¦ãã“ã«ä»»ã›ã¦ã„ã‚‹</p>
<p class="text-2xl font-bold text-center" v-click>ã‚ã¡ã‚ƒãã¡ã‚ƒæ€ªã—ã„ã§ã™ã­...</p>


---
layout: center
---
# ã¨ã„ã†ã“ã¨ã§

---
layout: center
---

<h1>Letâ€™ fork!!</h1>

---
layout: image
image: fork_repo.png
---


---
layout: default
---

<div class="flex flex-row items-center justify-center mt-16">

```dart{all}{maxHeight: '450px', class:'!children:text-xs mt-8'}
class GoRouter implements RouterConfig<RouteMatchList> {
/// Default constructor to configure a GoRouter with a routes builder
  /// and an error page builder.
  ///
  /// The `routes` must not be null and must contain an [GoRouter] to match `/`.
  factory GoRouter({
    required List<RouteBase> routes,
    //...
  }) {
    return GoRouter.routingConfig(
      routingConfig: _ConstantRoutingConfig(
        RoutingConfig(
          routes: routes,
          //...
        ),
      ),
      //...
    );
  }
}
```

</div>

<p class="text-lg font-bold text-center">ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã®å•é¡Œãªã®ã§ã€åˆæœŸåŒ–ã®ã‚³ãƒ¼ãƒ‰ãŒæ€ªã—ã„ã¨è¸ã‚€</p>

---
layout: default
---

<div class="flex flex-row items-center justify-center mt-16">

```dart{all|11}{maxHeight: '450px', class:'!children:text-xs mt-8'}
/// Creates a [GoRouter] with a dynamic [RoutingConfig].
  ///
  /// See [routing_config.dart](https://github.com/flutter/packages/blob/main/packages/go_router/example/lib/routing_config.dart).
  GoRouter.routingConfig({
    //...
  }) : _routingConfig = routingConfig {
    //...
    WidgetsFlutterBinding.ensureInitialized();

    routeInformationProvider = GoRouteInformationProvider(
      initialLocation: _effectiveInitialLocation(initialLocation), // â†ã™ã”ã„åˆæœŸåŒ–ã®ãƒ‘ã‚¹ã‚’æ±ºã‚ã¦ã„ãã†ãªã‚„ã¤ãŒã„ã‚‹!!
      initialExtra: initialExtra,
      refreshListenable: refreshListenable,
      routerNeglect: routerNeglect,
    );
    //...
  }
```

</div>

<p class="text-lg font-bold text-center">ãµã‚€ãµã‚€ã€ã€</p>

---
layout: default
---

<div class="flex flex-row items-center justify-center mt-16">

```dart{all|18-20}{maxHeight: '450px', class:'!children:text-xs mt-8'}
xxx
```

</div>

<p class="text-lg font-bold text-center">æ˜ã‚‰ã‹ã«æ€ªã—ã„ãã€ã€ã€ã“ã“ã§åˆæœŸåŒ–ã—ã¦ã„ã‚‹ã£ã½ã„</p>


---
layout: default
---

<div class="flex flex-row items-center justify-center mt-16">

```dart{all|18-20}{maxHeight: '450px', class:'!children:text-xs mt-8'}
xxx
```

</div>

<p class="text-lg font-bold text-center">ç›´ã—ã¦ã¿ã¦</p>
